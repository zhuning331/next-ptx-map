"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{5644:function(t,e,a){a.r(e),a.d(e,{default:function(){return w}}),window.ol&&!ol.ext&&(ol.ext={});var i=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t};window.ol&&(ol.inherits||(ol.inherits=i)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var n=i,r=a(2971),o=a(1015),s=a(605),h=a(8641),p=a(2706),c=a(947),d=a(4046),l=a(7890),f=a(8958),u=a(6994),m=a(4658),y=a(6101),g=a(5069);var _=function(t){const e=t.frameState,a=(0,y.Jp)(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new g.Z(t.context,e.pixelRatio,e.extent,a,e.viewState.rotation)},v=function(t){t=t||{},this.duration_="number"==typeof t.duration?t.duration>=0?t.duration:0:1e3,this.fade_="function"==typeof t.fade?t.fade:null,this.repeat_=Number(t.repeat);var e="function"==typeof t.easing?t.easing:o.GE;t.revers?this.easing_=function(t){return 1-e(t)}:this.easing_=e,this.hiddenStyle=t.hiddenStyle,r.Z.call(this)};n(v,r.Z),v.hiddenStyle=new d.ZP({image:new l.Z({}),stroke:new f.Z({color:"transparent"})}),v.prototype.drawGeom_=function(t,e,a){this.fade_&&(t.context.globalAlpha=this.fade_(1-t.elapsed));for(var i=t.style,n=0;n<i.length;n++)try{var r=t.vectorContext||_(t);r.setStyle(i[n]),i[n].getZIndex()<0?r.drawGeometry(a||e):r.drawGeometry(e)}catch(t){}},v.prototype.animate=function(){return!1},s.Z.prototype.animateFeature=function(t,e){var a=this._featureAnimationLayer;a||(a=this._featureAnimationLayer=new u.Z({source:new m.Z})).setMap(this),a.getSource().addFeature(t);var i=e.on("animationend",(function(e){e.feature===t&&(a.getSource().removeFeature(t),(0,p.B)(i))}));a.animateFeature(t,e)},c.Z.prototype.animateFeature=function(t,e,a){var i,n=this,r=t.getStyle(),o=r||(this.getStyleFunction?this.getStyleFunction()(t):null);o||(o=[]),o instanceof Array||(o=[o]);var s={vectorContext:null,frameState:null,start:0,time:0,elapsed:0,extent:!1,feature:t,geom:t.getGeometry(),typeGeom:t.getGeometry().getType(),bbox:t.getGeometry().getExtent(),coord:(0,h.qg)(t.getGeometry().getExtent()),style:o};e instanceof Array||(e=[e]);for(var c=e.length-1;c>=0;c--)0===e[c].duration_&&e.splice(c,1);var d=0,l=0,f=a&&this.getFilters?this.getFilters():[];function u(a){s.type=a.type;try{s.vectorContext=a.vectorContext||_(a)}catch(a){}if(s.frameState=a.frameState,s.inversePixelTransform=a.inversePixelTransform,s.extent||(s.extent=a.frameState.extent,s.start=a.frameState.time,s.context=a.context),s.time=a.frameState.time-s.start,s.elapsed=s.time/e[l].duration_,s.elapsed>1&&(s.elapsed=1),a.context.save(),f.forEach((function(t){t.get("active")&&t.precompose(a)})),this.getOpacity&&(a.context.globalAlpha=this.getOpacity()),e[l].animate(s)){var i={type:"animating",step:l,start:s.start,time:s.time,elapsed:s.elapsed,rotation:s.rotation||0,geom:s.geom,coordinate:s.coord,feature:t};e[l].dispatchEvent(i),n.dispatchEvent(i)}else++d<e[l].repeat_?s.extent=!1:l<e.length-1?(e[l].dispatchEvent({type:"animationend",feature:t}),l++,d=0,s.extent=!1):m();f.forEach((function(t){t.get("active")&&t.postcompose(a)})),a.context.restore(),a.frameState.animate=!0}function m(a){(0,p.B)(i),i=null,t.setStyle(r);var o={type:"animationend",feature:t};if(a)for(var s in a)a.hasOwnProperty(s)&&(o[s]=a[s]);e[l].dispatchEvent(o),n.dispatchEvent(o)}function y(a){if(e.length&&!i){if(i=n.on(["postcompose","postrender"],u.bind(n)),n.renderSync)try{n.renderSync()}catch(s){}else n.changed();t.setStyle(e[l].hiddenStyle||v.hiddenStyle);var r={type:"animationstart",feature:t};if(a)for(var o in a)a.hasOwnProperty(o)&&(r[o]=a[o]);e[l].dispatchEvent(r),n.dispatchEvent(r)}}return y(),{start:y,stop:m,isPlaying:function(){return!!i}}};var x=v,S=function(t){switch(t=t||{},x.call(this,t),this.speed_=t.speed||0,this.path_=t.path,t.rotate){case!0:case 0:this.rotate_=0;break;default:this.rotate_=t.rotate||!1}this.path_&&this.path_.getGeometry&&(this.path_=this.path_.getGeometry()),this.path_&&this.path_.getLineString&&(this.path_=this.path_.getLineString()),this.path_.getLength?(this.dist_=this.path_.getLength(),this.path_&&this.path_.getCoordinates&&(this.path_=this.path_.getCoordinates())):this.dist_=0,this.speed_>0&&(this.duration_=this.dist_/this.speed_)};n(S,x),S.prototype.animate=function(t){if(!t.time&&!this.dist_)return!1;var e,a,i,n,r,o,s=this.dist_*this.easing_(t.elapsed),h=0;a=this.path_[0];for(var p=1;p<this.path_.length;p++){if(e=a,n=(a=this.path_[p])[0]-e[0],r=a[1]-e[1],(o=Math.sqrt(n*n+r*r))&&h+o>=s){i=(s-h)/o,a=[e[0]+(a[0]-e[0])*i,e[1]+(a[1]-e[1])*i];break}h+=o}var c=t.style;if(t.rotation=Math.PI/2+Math.atan2(e[1]-a[1],e[0]-a[0]),!1!==this.rotate_){var d=[],l=this.rotate_-t.rotation+t.frameState.viewState.rotation;t.rotation=Math.PI/2+Math.atan2(e[1]-a[1],e[0]-a[0]);for(var f=0;i=t.style[f];f++)i.getImage()&&i.getImage().setRotation(l),d.push(i);t.style=d}return t.geom.setCoordinates(a),this.drawGeom_(t,t.geom),t.style=c,t.time<=this.duration_};var w=S}}]);