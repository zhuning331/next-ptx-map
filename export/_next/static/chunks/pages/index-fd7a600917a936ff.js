(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5075)}])},5075:function(e,n,t){"use strict";t.r(n);var o=t(5893),i=t(7294),a=t(2488),r=t(605),u=t(2241),s=t(1090),c=t(9376),f=t(6994),w=t(7821),d=t(4658),h=t(188),l=t(3904),m=t(4046),g=t(1751),v=t(1311),_=t(4155);n.default=function(){return(0,i.useEffect)((function(){var e=new d.Z,n=new f.Z({source:e,zIndex:99}),o=(new r.Z({target:"map",layers:[new c.Z({source:new w.Z({url:"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s=GaEdit"})}),n],view:new u.ZP({center:(0,v.mi)([121.5470022,25.0485038]),zoom:14})}),a.ZP.connect(_.env.BASE_URL,{path:"/api/socketio"}));if(o.on("connect",(function(){console.log("SOCKET CONNECTED!",o.id)})),o.on("message",(function(o){o.forEach((function(o){var i=(0,v.mi)([o.BusPosition.PositionLon,o.BusPosition.PositionLat]),a=e.getFeatureById(o.PlateNumb);if(a){var r=a.getGeometry().getCoordinates();t.e(644).then(t.bind(t,5644)).then((function(e){var t=new(0,e.default)({path:new l.Z([r,i]),rotate:!0,speed:.3});n.animateFeature(a,t)}))}else{var u=new s.Z({geometry:new h.Z(i)});u.setId(o.PlateNumb),u.setStyle(new m.ZP({image:new g.Z({src:"./images/car.png",scale:.03,rotateWithView:!0,rotation:o.Azimuth*Math.PI/180})})),e.addFeature(u)}}))})),o)return function(){return o.disconnect()}}),[]),(0,o.jsx)("div",{id:"map",style:{width:"100%",height:"100vh"}})}}},function(e){e.O(0,[456,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);